/* ncstore.js - Copyright (c) 2010-2017 Marcus Westin */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ncstore=e()}}(function(){return function(){function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return o(n||e)},f,f.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}return e}()({1:[function(e,t,n){"use strict";var r=e("../src/store-engine"),o=[e("../storages/localStorage"),e("../storages/sessionStorage"),e("../storages/oldIE-userDataStorage"),e("../storages/oldFF-globalStorage"),e("../storages/memoryStorage")],i=[e("../plugins/defaults"),e("../plugins/expire")];t.exports=r.createStore(o,i)},{"../plugins/defaults":2,"../plugins/expire":3,"../src/store-engine":4,"../storages/localStorage":6,"../storages/memoryStorage":7,"../storages/oldFF-globalStorage":8,"../storages/oldIE-userDataStorage":9,"../storages/sessionStorage":10}],2:[function(e,t,n){"use strict";function r(){function e(e,t){n=t}function t(e,t){var r=e();return r!==undefined?r:n[t]}var n={};return{defaults:e,get:t}}t.exports=r},{}],3:[function(e,t,n){"use strict";function r(){function e(e,t,n,r){return this.hasNamespace(o)||u.set(t,r),e()}function t(e,t){return this.hasNamespace(o)||a.call(this,t),e()}function n(e,t){return this.hasNamespace(o)||u.remove(t),e()}function r(e,t){return u.get(t)}function i(e){var t=[];this.each(function(e,n){t.push(n)});for(var n=0;n<t.length;n++)a.call(this,t[n])}function a(e){u.get(e,Number.MAX_VALUE)<=(new Date).getTime()&&(this.raw.remove(e),u.remove(e))}var u=this.createStore(this.storage,null,this._namespacePrefix+o);return{set:e,get:t,remove:n,getExpiration:r,removeExpiredKeys:i}}var o="expire_mixin";t.exports=r},{}],4:[function(e,t,n){"use strict";function r(){var e="undefined"==typeof console?null:console;if(e){(e.warn?e.warn:e.log).apply(e,arguments)}}function o(e,t,n){n||(n=""),e&&!l(e)&&(e=[e]),t&&!l(t)&&(t=[t]);var o=n?"__ncstorejs_"+n+"_":"",i=n?new RegExp("^"+o):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("ncstore.js namespaces can only have alphanumerics + underscores and dashes");var v={_namespacePrefix:o,_namespaceRegexp:i,_testStorage:function(e){try{var t="__ncstorejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(r){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){function t(){if(n)return s(arguments,function(e,t){r[t]=e}),n.apply(o,r)}var r=a(arguments,0),o=this,i=[t].concat(r);return e.apply(o,i)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(r){n=e}return n!==undefined?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(l(e))return void s(e,function(e){t._addPlugin(e)});if(!u(this.plugins,function(t){return e===t})){if(this.plugins.push(e),!d(e))throw new Error("Plugins must be function values that return objects");var n=e.call(this);if(!g(n))throw new Error("Plugins must return an object of function properties");s(n,function(n,r){if(!d(n))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,r)})}},addStorage:function(e){r("ncstore.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},h=f(v,p,{plugins:[]});return h.raw={},s(h,function(e,t){d(e)&&(h.raw[t]=c(h,e))}),s(e,function(e){h._addStorage(e)}),s(t,function(e){h._addPlugin(e)}),h}var i=e("./util"),a=i.slice,u=i.pluck,s=i.each,c=i.bind,f=i.create,l=i.isList,d=i.isFunction,g=i.isObject;t.exports={createStore:o};var p={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return t===undefined?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each(function(n,r){e.call(t,t._deserialize(n),(r||"").replace(t._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__ncstorejs_"+e+"_"},createStore:function(){return o.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return o(this.storage,this.plugins,e)}}},{"./util":5}],5:[function(e,t,n){(function(e){"use strict";function n(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}}function r(e,t){return Array.prototype.slice.call(e,t||0)}function o(e,t){a(e,function(e,n){return t(e,n),!1})}function i(e,t){var n=u(e)?[]:{};return a(e,function(e,r){return n[r]=t(e,r),!1}),n}function a(e,t){if(u(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function u(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}function s(e){return e&&"[object Function]"==={}.toString.call(e)}function c(e){return e&&"[object Object]"==={}.toString.call(e)}var f=function(){return Object.assign?Object.assign:function(e,t,n,r){for(var i=1;i<arguments.length;i++)o(Object(arguments[i]),function(t,n){e[n]=t});return e}}(),l=function(){if(Object.create)return function(e,t,n,o){var i=r(arguments,1);return f.apply(this,[Object.create(e)].concat(i))};var e=function(){};return function(t,n,o,i){var a=r(arguments,1);return e.prototype=t,f.apply(this,[new e].concat(a))}}(),d=function(){return String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}(),g="undefined"!=typeof window?window:e;t.exports={assign:f,create:l,trim:d,bind:n,slice:r,each:o,map:i,pluck:a,isList:u,isFunction:s,isObject:c,Global:g}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"use strict";function r(){return f.localStorage}function o(e){return r().getItem(e)}function i(e,t){return r().setItem(e,t)}function a(e){for(var t=r().length-1;t>=0;t--){var n=r().key(t);e(o(n),n)}}function u(e){return r().removeItem(e)}function s(){return r().clear()}var c=e("../src/util"),f=c.Global;t.exports={name:"localStorage",read:o,write:i,each:a,remove:u,clearAll:s}},{"../src/util":5}],7:[function(e,t,n){"use strict";function r(e){return s[e]}function o(e,t){s[e]=t}function i(e){for(var t in s)s.hasOwnProperty(t)&&e(s[t],t)}function a(e){delete s[e]}function u(e){s={}}t.exports={name:"memoryStorage",read:r,write:o,each:i,remove:a,clearAll:u};var s={}},{}],8:[function(e,t,n){"use strict";function r(e){return f[e]}function o(e,t){f[e]=t}function i(e){for(var t=f.length-1;t>=0;t--){var n=f.key(t);e(f[n],n)}}function a(e){return f.removeItem(e)}function u(){i(function(e,t){delete f[e]})}var s=e("../src/util"),c=s.Global;t.exports={name:"oldFF-globalStorage",read:r,write:o,each:i,remove:a,clearAll:u};var f=c.globalStorage},{"../src/util":5}],9:[function(e,t,n){"use strict";function r(e,t){if(!p){var n=s(e);g(function(e){e.setAttribute(n,t),e.save(l)})}}function o(e){if(!p){var t=s(e),n=null;return g(function(e){n=e.getAttribute(t)}),n}}function i(e){g(function(t){for(var n=t.XMLDocument.documentElement.attributes,r=n.length-1;r>=0;r--){var o=n[r];e(t.getAttribute(o.name),o.name)}})}function a(e){var t=s(e);g(function(e){e.removeAttribute(t),e.save(l)})}function u(){g(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(l);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(l)})}function s(e){return e.replace(/^\d/,"___$&").replace(v,"___")}var c=e("../src/util"),f=c.Global;t.exports={name:"oldIE-userDataStorage",write:r,read:o,each:i,remove:a,clearAll:u};var l="ncstorejs",d=f.document,g=function(){if(!d||!d.documentElement||!d.documentElement.addBehavior)return null;var e,t,n;try{t=new ActiveXObject("htmlfile"),t.open(),t.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,n=e.createElement("div")}catch(r){n=d.createElement("div"),e=d.body}return function(t){var r=[].slice.call(arguments,0);r.unshift(n),e.appendChild(n),n.addBehavior("#default#userData"),n.load(l),t.apply(this,r),e.removeChild(n)}}(),p=(f.navigator?f.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),v=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g")},{"../src/util":5}],10:[function(e,t,n){"use strict";function r(){return f.sessionStorage}function o(e){return r().getItem(e)}function i(e,t){return r().setItem(e,t)}function a(e){for(var t=r().length-1;t>=0;t--){var n=r().key(t);e(o(n),n)}}function u(e){return r().removeItem(e)}function s(){return r().clear()}var c=e("../src/util"),f=c.Global;t.exports={name:"sessionStorage",read:o,write:i,each:a,remove:u,clearAll:s}},{"../src/util":5}]},{},[1])(1)});
